# 4.2 Inside a Router

- Routers forward packets between networks using routing tables and switching fabric.
- **Key components:** Input ports, output ports, switching fabric, routing processor.

---

## Router Components
- **Input port:** Receives packets, does lookup.
- **Switching fabric:** Connects input to output ports.
- **Output port:** Queues and transmits packets.
- **Routing processor:** Runs routing protocols, manages tables.

---

## Diagram: Router Architecture
```mermaid
graph TD
  A[Input Port] -- Lookup --> B[Switching Fabric]
  B -- Connect --> C[Output Port]
  D[Routing Processor] -- Control --> B
```

---

## Summary Table
| Component         | Function                  |
|-------------------|--------------------------|
| Input Port        | Receive, lookup          |
| Switching Fabric  | Connect input/output     |
| Output Port       | Queue, transmit          |
| Routing Processor | Protocols, table mgmt    |

---

## Practice Questions
1. **List the main components of a router.**
2. **What is the function of the switching fabric?**
3. **Draw a diagram of router architecture.**

---

**Exam Tips:**
- Know router components and their functions.
- Be able to draw and explain router diagrams.

---

## Router Buffer Management
- **Tail Drop:** Packets are dropped when the buffer is full (default behavior).
- **RED (Random Early Detection):** Proactively drops packets before the buffer is full to signal congestion.
- **Bufferbloat:** Excessive buffering causes high latency and jitter; modern routers use AQM (Active Queue Management) to mitigate.

## Switching Fabric Types
- **Memory:** Packets copied to memory, then to output port (simple, slow).
- **Bus:** Shared bus connects input/output ports (faster, can be bottlenecked).
- **Crossbar:** Matrix of interconnections, allows multiple simultaneous transfers (fastest, most expensive). 