# 5.4 Routing Among ISPs: BGP

- BGP (Border Gateway Protocol) is the standard for inter-domain (inter-AS) routing.
- **Type:** Path vector protocol.
- **Features:** Policy-based, scalable, loop prevention.

---

## BGP Operation
- Routers exchange path vectors (AS paths).
- Routing decisions based on policy, not just shortest path.

---

## Diagram: BGP AS Path
```mermaid
graph TD
  A[AS1] -- Path Info --> B[AS2]
  B -- Path Info --> C[AS3]
  C -- Path Info --> D[AS4]
```

---

## Summary Table
| Feature      | BGP Value         |
|-------------|-------------------|
| Type        | Path vector       |
| Policy      | Yes               |
| Scalability | High              |
| Loop Prev.  | AS path           |

---

## Practice Questions
1. **What type of protocol is BGP?**
2. **How does BGP prevent routing loops?**
3. **Draw a diagram of BGP AS path.**

---

**Exam Tips:**
- Know BGP features and AS path concept.
- Be able to draw and explain BGP diagrams.

---

## BGP Path Attributes
- **AS-PATH:** List of ASes a route has traversed (used for loop prevention).
- **NEXT-HOP:** IP address of the next hop router.
- **LOCAL_PREF:** Preference for exit points within an AS.
- **MED (Multi-Exit Discriminator):** Suggests preferred entry point into an AS.

## BGP Policy and Decision Process
- **Policy:** Routing decisions based on business agreements, not just shortest path.
- **Decision Steps:** LOCAL_PREF > AS-PATH length > ORIGIN > MED > eBGP over iBGP > lowest router ID.

## Diagram: BGP Decision Process
```mermaid
graph TD
  A[Routes Received] --> B[Apply LOCAL_PREF]
  B --> C[Shortest AS-PATH]
  C --> D[Lowest ORIGIN]
  D --> E[Lowest MED]
  E --> F[eBGP over iBGP]
  F --> G[Lowest Router ID]
``` 